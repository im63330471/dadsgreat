<!--
Make a minimal html file for qrcode generation using “qrcode.min.js”

overview:
this html file receives user’s text input and a number, then generate one or more qrcodes. Each qrcode contains the text chopped into pieces with a maximal length of the number specified

other requirements:
1. a button to run script, in green colour
2. a button to clear text input, in red colour

layout:
row 1, text area, 100% screen width
row 2, run button, clear number, input box
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>QR Code Maker B</title>
  <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script> <!-- [web:1][web:4][web:7] -->
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
    }
    #inputText {
      width: 100%;
      box-sizing: border-box;
      padding: 8px;
      font-size: 24px;
    }
    input { /* buttons & number input */
      display: inline-block;
      padding: 6px;
      font-size: 18px;
    }
    #maxChars {
      width: 10%;
    }
    #okBtn, #testBtn, #clearBtn {
      height: 42px;
      width: 25%;
      color: white;
    }
    #okBtn {
      background-color: green;
    }
    #testBtn {
      background-color: blue;
    }
    #clearBtn {
      background-color: red;
    }
    #qrResults {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    .qr-block {
      text-align: center;
      margin-top: 64px;
      margin-bottom: 64px;
    }
    .qr-label {
      font-size: 18px;
      margin-bottom: 6px;
    }
    #versionId {
      margin-top: 10px;
      text-align: center;
      font-size: 12px;
      color: #555;
    }
  </style>
</head>
<body>

  <textarea id="inputText" rows="4" placeholder="Enter text to encode"></textarea>
  <center>
    <input id="okBtn" type="button" value="OK">
    <input id="maxChars" type="number" min="1" value="13">
    <input id="testBtn" type="button" value="Test">
    <input id="clearBtn" type="button" value="Clear">
  </center>
  <div id="qrResults"></div>
  <div id="versionId">2026-1956</div>

  <script>
    const inputTextEl = document.getElementById('inputText');
    const maxCharsEl = document.getElementById('maxChars');
    const okBtn = document.getElementById('okBtn');
    const testBtn = document.getElementById('testBtn');
    const clearBtn = document.getElementById('clearBtn');
    const qrResultsEl = document.getElementById('qrResults');

    function clearResults() {
      qrResultsEl.innerHTML = '';
    }

    function dummyInput() {
      inputTextEl.value = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent gravida venenatis cursus. Vivamus justo ligula, consequat eget luctus eu, posuere non enim. Nam porta quam sit amet est gravida, non vehicula mauris varius. Nam eu tellus metus.';
    }

    function generateChunks(text, size) {
      const chunks = [];
      for (let i = 0; i < text.length; i += size) {
        chunks.push(text.slice(i, i + size));
      }
      return chunks;
    }

    function generateQRCodes() {
      const text = inputTextEl.value || '';
      const maxChars = parseInt(maxCharsEl.value, 10);

      clearResults();

      if (!text.length || !maxChars || maxChars <= 0) {
        inputTextEl.value = ('Please enter text and a valid max characters value.');
        return;
      }

      const chunks = generateChunks(text, maxChars);
      const total = chunks.length;

      chunks.forEach((chunk, index) => {
        const block = document.createElement('div');
        block.className = 'qr-block';

        const label = document.createElement('div');
        label.className = 'qr-label';
        label.textContent =
          (index + 1) + '/' + total + ', ' + chunk.length + ' characters';

        const qrContainer = document.createElement('div');

        block.appendChild(label);
        block.appendChild(qrContainer);
        qrResultsEl.appendChild(block);

        // Create QR code for this chunk
        new QRCode(qrContainer, {
          text: chunk,
          width: 300,
          height: 300,
          colorDark: '#000000',
          colorLight: '#ffffff',
          correctLevel: QRCode.CorrectLevel.H
        });
      });
    }

    okBtn.addEventListener('click', generateQRCodes);
    testBtn.addEventListener('click', dummyInput);
    clearBtn.addEventListener('click', () => {
      clearResults();
      inputTextEl.value = '';
      inputTextEl.focus();
    });
  </script>
</body>
</html>